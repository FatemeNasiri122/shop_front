import{r as C,a as T,b as A,j as e,o as M,l as W,d as $,L as z}from"./index-kG6OA0Lj.js";import{I as N,d as S,a as L,L as O}from"./Loading-oZSkqkm9.js";import{u as U,T as x}from"./index.esm-YALLmXRt.js";import{r as Q,s as G}from"./auth-f6KA6lip.js";import{u as B}from"./useMutation-rvPvknYD.js";import{B as K,O as k,I as D}from"./Select-t3SlGVAR.js";import{C as Z}from"./CircularProgress-5_IFDHuH.js";import{G as r}from"./Grid-9HnAf3d4.js";import{I as F}from"./IconButton-J2GK4gW8.js";import{F as H}from"./FormControlLabel-Szg5Ek2V.js";import{C as J}from"./Checkbox-bbhnfrQX.js";import{u as R}from"./useDispatch-CQXfthR1.js";import{F as P}from"./FormControl-HjXt7Vmi.js";import{B as V}from"./Breadcrumbs-2mmZjkxV.js";import"./createSvgIcon-YEOVVOch.js";import"./createSvgIcon-1l7Qou-N.js";import"./useId-q3vM3uvD.js";import"./useControlled-wiAP_r8o.js";import"./api--0IjzKCk.js";import"./Paper-uuAsmGUK.js";import"./ButtonBase-BwOv2JR7.js";import"./useSlotProps-emH9y0qt.js";import"./extendSxProp-WqtJkzWi.js";const X=()=>{var p,a,c,h,q,I;const[l,d]=C.useState(!1),[m,w]=C.useState(!1),g=T(),_=R(),{pathname:u}=A();console.log(u.split("/")[1]);const{register:i,handleSubmit:f,watch:n,formState:{errors:t}}=U(),{mutateAsync:y,isLoading:j}=B({mutationFn:async s=>Q(s),onError:s=>{var v,E;console.log(s),_(M({message:((E=(v=s==null?void 0:s.response)==null?void 0:v.data)==null?void 0:E.message)||"server error",type:"error"}))},onSuccess:s=>{console.log(s),_(W(s.data.user)),localStorage.setItem("token",s.data.token);const v=localStorage.getItem("backUrl")||"/";queryClient.invalidateQueries({queryKey:["verify-user"]}),u.split("/")[1]==="signin-or-register"&&(g(v),localStorage.setItem("backUrl","/"))}}),b=async s=>{console.log(s),await y(s)};return e.jsxs(e.Fragment,{children:[e.jsx(K,{sx:{color:"#fff",zIndex:s=>s.zIndex.drawer+1},open:j,children:e.jsx(Z,{color:"inherit"})}),e.jsxs("div",{className:"moreWideContainer",children:[e.jsx("h1",{className:"title",children:"register"}),e.jsx("form",{onSubmit:f(b),children:e.jsxs(r,{container:!0,spacing:2,columnSpacing:2,children:[e.jsxs(r,{item:!0,xs:12,sm:6,children:[e.jsx("label",{htmlFor:"first-name",className:"inputLabel",children:"First Name"}),e.jsx(x,{id:"first-name",placeholder:"Enter your first name",...i("firstName",{required:"this field is required",maxLength:{value:15,message:"the maximum first name can be 15 characters"}}),fullWidth:!0,error:t==null?void 0:t.firstName}),e.jsx("p",{className:"error",children:(p=t==null?void 0:t.firstName)==null?void 0:p.message})]}),e.jsxs(r,{item:!0,xs:12,sm:6,children:[e.jsx("label",{htmlFor:"last-name",className:"inputLabel",children:"Last Name"}),e.jsx(x,{id:"last-name",placeholder:"Enter your last name",...i("lastName",{required:"this field is required",maxLength:{value:15,message:"the maximum last name can be 15 characters"}}),fullWidth:!0,error:t==null?void 0:t.lastName}),e.jsx("p",{className:"error",children:(a=t==null?void 0:t.lastName)==null?void 0:a.message})]}),e.jsxs(r,{item:!0,xs:12,sm:6,children:[e.jsx("label",{htmlFor:"email",className:"inputLabel",children:"Email"}),e.jsx(x,{id:"email",placeholder:"Enter your email",...i("email",{required:"this field is required",pattern:{value:/\S+@\S+\.\S+/,message:"Entered value does not match email format"}}),fullWidth:!0,error:t==null?void 0:t.email}),e.jsx("p",{className:"error",children:(c=t==null?void 0:t.email)==null?void 0:c.message})]}),e.jsxs(r,{item:!0,xs:12,sm:6,children:[e.jsx("label",{htmlFor:"confirm-email",className:"inputLabel",children:"Confirm Email"}),e.jsx(x,{id:"confirm-email",placeholder:"Enter your email",...i("confirmEmail",{required:"this field is required",validate:s=>{if(n("email")!==s)return"email and confirm email does not match"}}),fullWidth:!0,error:t==null?void 0:t.confirmEmail}),e.jsx("p",{className:"error",children:(h=t==null?void 0:t.confirmEmail)==null?void 0:h.message})]}),e.jsxs(r,{item:!0,xs:12,sm:6,children:[e.jsx("label",{htmlFor:"password",className:"inputLabel",children:"Password"}),e.jsx(k,{id:"password",type:l?"text":"password",...i("password",{required:"this field is required",pattern:{value:/(?=^.{8,}$)(?=.*\d)(?=.*[!@#$%^&*]+)(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,message:"password is invalid"}}),endAdornment:e.jsx(N,{position:"end",children:e.jsx(F,{"aria-label":"toggle password visibility",onClick:()=>d(s=>!s),edge:"end",children:l?e.jsx(S,{}):e.jsx(L,{})})}),error:t==null?void 0:t.password,placeholder:"Enter your current password",fullWidth:!0}),e.jsx("p",{className:"error",children:(q=t==null?void 0:t.password)==null?void 0:q.message})]}),e.jsxs(r,{item:!0,xs:12,sm:6,children:[e.jsx("label",{htmlFor:"newPassword",className:"inputLabel",children:"Confirm Password"}),e.jsx(k,{id:"newPassword",type:m?"text":"password",...i("confirmPassword",{required:"this field is required",validate:s=>{if(n("password")!==s)return"password and confirm password does not match"}}),endAdornment:e.jsx(N,{position:"end",children:e.jsx(F,{"aria-label":"toggle password visibility",onClick:()=>w(s=>!s),edge:"end",children:m?e.jsx(S,{}):e.jsx(L,{})})}),error:t==null?void 0:t.confirmPassword,placeholder:"Enter your current password",fullWidth:!0}),e.jsx("p",{className:"error",children:(I=t==null?void 0:t.confirmPassword)==null?void 0:I.message})]}),e.jsx(r,{item:!0,xs:12,children:e.jsx(H,{control:e.jsx(J,{}),label:"I would like to receive a newsletter",...i("newsLetter")})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,margin:"auto",children:e.jsx("button",{type:"submit",className:"btn",children:"register"})})]})})]})]})},Y="_breadCrumLink_7vta0_43",ee="_breadCrumText_7vta0_48",te="_container_7vta0_53",se="_goldLine_7vta0_59",ae="_title_7vta0_66",ne="_leftTitle_7vta0_74",re="_error_7vta0_81",ie="_modalContainer_7vta0_87",oe="_modalContent_7vta0_95",le="_titleModal_7vta0_105",ce="_btnModal_7vta0_108",de="_btn_7vta0_108",me="_active_7vta0_135",ue="_paginationContainer_7vta0_140",pe="_btnContainer_7vta0_147",he="_counterContainer_7vta0_153",xe="_counter_7vta0_153",ge="_number_7vta0_171",_e="_inputLabel_7vta0_179",fe="_link_7vta0_185",je="_categoryContainer_7vta0_215",be="_category_7vta0_215",ve="_categoryImgContainer_7vta0_225",Ce="_notFoundText_7vta0_229",we="_center_7vta0_234",ye="_offer_7vta0_240",Ne="_stepCounter_7vta0_255",Se="_signupContainer_7vta0_261",Le="_registerContainer_7vta0_278",ke="_signinContainer_7vta0_294",o={breadCrumLink:Y,breadCrumText:ee,container:te,goldLine:se,title:ae,leftTitle:ne,error:re,modalContainer:ie,modalContent:oe,titleModal:le,btnModal:ce,btn:de,active:me,paginationContainer:ue,btnContainer:pe,counterContainer:he,counter:xe,number:ge,inputLabel:_e,link:fe,"progress-container":"_progress-container_7vta0_198",categoryContainer:je,category:be,categoryImgContainer:ve,notFoundText:Ce,center:we,offer:ye,"offer-header":"_offer-header_7vta0_249",stepCounter:Ne,signupContainer:Se,registerContainer:Le,signinContainer:ke},Fe=({setSteps:l})=>{var b,p;const d=$(),[m,w]=C.useState(!1),g=R(),_=T(),{pathname:u}=A();console.log(u.split("/")[1]);const{register:i,handleSubmit:f,formState:{errors:n}}=U(),{isLoading:t,mutateAsync:y}=B({mutationFn:async a=>G(a),onError:a=>{var c,h;g(M({message:(h=(c=a==null?void 0:a.response)==null?void 0:c.data)==null?void 0:h.message,type:"error"})),console.log(a)},onSuccess:a=>{console.log(a.data.user),localStorage.setItem("token",a.data.token),g(W(a.data.user));const c=localStorage.getItem("backUrl")||"/";d.invalidateQueries({queryKey:["verify-user"]}),u.split("/")[1]==="signin-or-register"&&(_(c),localStorage.setItem("backUrl","/"))}}),j=async a=>{console.log(a),await y(a)};return e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(O,{isLoading:t}),e.jsx(r,{item:!0,lg:6,xs:12,order:{lg:1,xs:2},children:e.jsxs("div",{className:o.registerContainer,children:[e.jsx("h2",{className:o.title,children:"register"}),e.jsx("p",{children:"create account for yourself"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Receive our exclusive newsletter"}),e.jsx("li",{children:"Save your favourite products"}),e.jsx("li",{children:"Shop faster and check your orders and returns"})]}),e.jsx("button",{onClick:()=>l(1),className:o.btn,children:"register"})]})}),e.jsx(r,{item:!0,lg:6,xs:12,order:{lg:2,xs:1},children:e.jsxs("div",{className:o.signinContainer,children:[e.jsx("h2",{className:o.title,children:"sign in"}),e.jsx("p",{className:o.explainText,children:"If you have already registered, sign in now"}),e.jsxs("form",{onSubmit:f(j),children:[e.jsxs(P,{children:[e.jsx(x,{...i("email",{required:"This field is required"}),id:"email",label:"email",variant:"outlined",type:"email",error:n==null?void 0:n.email}),e.jsx("p",{className:o.error,children:(b=n==null?void 0:n.email)==null?void 0:b.message})]}),e.jsxs(P,{variant:"outlined",children:[e.jsx(D,{htmlFor:"password",children:"Password"}),e.jsx(k,{id:"password",type:m?"text":"password",label:"password",endAdornment:e.jsx(N,{position:"end",children:e.jsx(F,{"aria-label":"toggle password visibility",onClick:()=>w(a=>!a),edge:"end",children:m?e.jsx(S,{}):e.jsx(L,{})})}),...i("password",{required:"This field is required"}),error:n==null?void 0:n.password}),e.jsx("p",{className:o.error,children:(p=n==null?void 0:n.password)==null?void 0:p.message})]}),e.jsx("button",{type:"submit",className:o.btn,onClick:f(j),children:"sign in"})]})]})})]})},Ye=()=>{const[l,d]=C.useState(0);return e.jsxs(e.Fragment,{children:[e.jsxs(V,{"aria-label":"breadcrumb",children:[e.jsx(z,{to:"/",className:"breadCrumLink",children:"home"}),e.jsx("span",{className:"breadCrumText",children:" Signin or Register "})]}),e.jsxs("div",{className:"signupContainer",children:[l===0&&e.jsx(Fe,{setSteps:d}),l===1&&e.jsx(X,{})]})]})};export{Ye as default};
